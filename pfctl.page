---
format: markdown
categories: technical-notes
...
There's a lot to wrap my brain round,
but I found a good looking guide [here](http://home.nuug.no/~peter/pf/en/long-firewall.html)
and the essentials about redirection
[here](http://www.openbsd.org/faq/pf/rdr.html).
Still couldn't make sense of it, thought.
But I finally found instructions simple enough to follow
[here](https://gist.github.com/kujohn/7209628).

I added the following line to `/etc/pf.conf`:

    rdr on lo0 proto tcp from any to 127.0.0.2 port 80 -> 127.0.0.1 port 8080

lo0 is the [loopback interface ](http://www.openbsd.org/faq/faq6.html#Setup.if).

I wasted a lot of time using the address `10.10.10.10` earlier but,
for some reason, it didn't work. Maybe because `10.10.10.10` doesn't match
the loopback interface.

I also have to put this line in the right place in the file. If I don't, I get an error like this:

> Rules must be in order: options, normalization, queueing, translation, filtering

And there must be a newline at the end of the file, otherwise I get a syntax error.

Finally, I can start the packet filter (`pf`) and load the file with this line:

    sudo pfctl -ef /etc/pf.conf
